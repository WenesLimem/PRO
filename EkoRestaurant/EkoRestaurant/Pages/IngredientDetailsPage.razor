@page "/ingredients/{Id:int}"
@using EkoRestaurant.Services
@using EkoRestaurant.Data 
@inject IngredientsService IngredientsService
@inject IngredientCategoriesService IngCatService

<MudGrid>
    <MudItem xs="12">
        <div class="page-title dark-color">Stocks</div>

        <div class="h2-quicksand dark-color">@currentIngredient.Name</div>
    </MudItem>
    <MudItem xs="12">

        <MudButton Style="float: left" Class="btn-mud-white-bg-rounded h6-quicksand" OnClick="@AddIngredientToList" Variant="Variant.Outlined"><img src="Images/Vector.svg" style="margin-right: 5px">Ajouter à la liste des course</MudButton>
        <MudButton Style="float: left; margin-left: 10px" Class="btn-mud-white-bg-rounded h6-quicksand" OnClick="@OpenModifiyIngredientDialog" Variant="Variant.Outlined"><img src="Images/Vector.svg" style="margin-right: 5px">Editer</MudButton>
    </MudItem>
    
    <MudItem xs="3">
    <MudCard Elevation="4">
        <MudCardContent>
            <MudText >Prix</MudText>
            <MudText Class="details-grid-content dark-color">@currentIngredient.UnitPrice CHF</MudText>
        </MudCardContent>
    </MudCard>
     </MudItem>
    <MudItem xs="3">
        <MudCard Elevation="4">
            <MudCardContent>
                <MudText >Restant</MudText>
                <MudText Class="details-grid-content" Color="Color.Error">@currentIngredient.UnitInStock pce</MudText>
            </MudCardContent>
        </MudCard>
            
    </MudItem>
    <MudItem xs="3">
        <MudCard Elevation="4">
            <MudCardContent>
                <MudText >Date de préemption</MudText>
                <MudText Class="details-grid-content" Color="Color.Info">@currentIngredient.ExpirationDate </MudText>
            </MudCardContent>
        </MudCard>
    </MudItem>
    <MudItem xs="3">
        <MudCard Elevation="4">
            <MudCardContent>
                <MudText >Fournisseur</MudText>
                @if (currentIngredient.Producer == null)
                {
                    <MudText Class="details-grid-content dark-color"> N/A </MudText>
                }
                else
                {
                    <MudText Class="details-grid-content dark-color">@currentIngredient.Producer </MudText>
                }
            </MudCardContent>
        </MudCard>
                
    </MudItem>
    
    
    <MudItem xs="6">
        <MudCard Elevation="4">
                <MudCardContent>
                    <MudText >Catégorie</MudText>
                    <MudText Class="details-grid-content dark-color">@IgCategory.Name</MudText>
                </MudCardContent>
            </MudCard>
    </MudItem>
            
       

    
</MudGrid>


@code {

    [Parameter]
    public int Id { get; set; }

    public IngredientCategory IgCategory { get; set; }
    public Ingredient currentIngredient { get; set; }

    protected override async Task OnInitializedAsync()
    {
        currentIngredient = IngredientsService.GetById(Id);
        IgCategory = IngCatService.GetById(currentIngredient.Category.Id); 
    }

    private void OpenModifiyIngredientDialog()
    {
        throw new NotImplementedException();
    }

    private void AddIngredientToList()
    {
        throw new NotImplementedException();
    }

}